<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 40px; }
    .card { padding: 20px; border: 1px solid #e5e7eb; border-radius: 12px; max-width: 560px; }
    .btn { display:inline-block; padding:10px 16px; border-radius:10px; border:1px solid #dadce0; text-decoration:none; }
    img { border-radius: 50%; height: 64px; }
    .row { margin-top: 12px; }
  </style>
</head>
<body>
<h1>Spring Security + Google OAuth2</h1>

<div class="card" th:if="${name == null}">
  <p>Войдите через Google:</p>
  <a class="btn" href="/oauth2/authorization/google">Sign in with Google</a>
</div>

<div class="card" th:if="${name != null}">
  <div class="row">
    <img th:if="${picture != null}" th:src="${picture}" alt="avatar">
  </div>
  <div class="row">
    <div><b th:text="${name}">User</b></div>
    <div th:text="${email}"></div>
  </div>
  <div class="row">
    <a class="btn" href="/me">Посмотреть OIDC claims</a>
  </div>
  <div class="row">
    <form th:action="@{/logout}" method="post">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button class="btn" type="submit">Logout</button>
    </form>
  </div>
</div>
</body>
</html>
